"use strict";angular.module("septWebRadioApp",["ngRoute","ngCookies","septWebRadioControllers","ui.bootstrap"]),angular.module("septWebRadioApp").config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/index",{templateUrl:"views/main/main.html"}).when("/stage",{templateUrl:"views/stage/stage.html",controller:"StageCtrl"}).when("/replay",{templateUrl:"views/replay/replay.html",controller:"ReplayCtrl"}).when("/topical",{templateUrl:"views/topical/topical.html",controller:"TopicalCtrl"}).when("/door",{templateUrl:"views/door/door.html",controller:"DoorCtrl"}).when("/backstage",{templateUrl:"views/backstage/backstage.html",controller:"BackstageCtrl"}).otherwise({redirectTo:"/index"}),$locationProvider.html5Mode(!0)}]),angular.module("septWebRadioServices",[]),angular.module("septWebRadioServices").service("applicationServices",["$http","$q","$cookieStore","soundCloudServices",function($http,$q,$cookieStore,soundCloudServices){var clientId="",redirectUri="";this.getInitApplication=function(){var token=$cookieStore.get("SC_Token"),initAppPromise=$http.get("init_application").success(function(result){clientId=result.clientId,redirectUri=result.url,SC.initialize({client_id:clientId,redirect_uri:redirectUri,access_token:token,scope:"non-expiring"})});return initAppPromise.then(function(){return token?soundCloudServices.me().then(function(user){return user}):void 0})}}]).service("soundCloudServices",["$http","$q","$cookieStore",function($http,$q,$cookieStore){var soundCloudToken,soundCloudUser,self=this;this.getConnexionLabel=function(){return self.isConnected()?"Log Out":"Log In"},this.isConnected=function(){return soundCloudUser?!0:!1},this.logInLogOut=function(){var deferred=$q.defer(),promise=deferred.promise;return soundCloudUser?(soundCloudToken=void 0,soundCloudUser=void 0,$cookieStore.remove("SC_Token"),$cookieStore.remove("SC_User"),deferred.resolve("disconnect"),promise):(SC.connect(function(){soundCloudToken=SC.accessToken(),$cookieStore.put("SC_Token",soundCloudToken),deferred.resolve(soundCloudToken)}),promise.then(function(){return self.me()}))},this.me=function(){var deferred=$q.defer();SC.get("/me",function(response){soundCloudUser=response,$cookieStore.put("SC_User",soundCloudUser),deferred.resolve(soundCloudUser)});var promise=deferred.promise;return promise.then(function(response){return response}),promise}}]).service("soundcloudSearch",["$http","$q","limitToFilter",function($http,$q,limitToFilter){this.autoCompleteSearch=function($search){var deferred=$q.defer();SC.get("/tracks",{q:$search},function(response){var tracks=limitToFilter(response,5);deferred.resolve(tracks)});var promise=deferred.promise;return promise.then(function(response){return response}),promise}}]),angular.module("septWebRadioControllers",["septWebRadioServices"]),angular.module("septWebRadioControllers").controller("MainCtrl",["$scope","applicationServices","soundCloudServices",function($scope,applicationServices,soundCloudServices){$scope.connexionButtonLabel=void 0,applicationServices.getInitApplication().then(function(data){$scope.connexionButtonLabel=soundCloudServices.getConnexionLabel()}),$scope.logInLogOutClick=function(){soundCloudServices.logInLogOut().then(function(){$scope.connexionButtonLabel=soundCloudServices.getConnexionLabel()})}}]),angular.module("septWebRadioControllers").controller("StageCtrl",["$scope","$http","soundcloudSearch",function($scope,$http,soundcloudSearch){$scope.title="Stage",$scope.isSearching=!1,$scope.search=void 0,$scope.selectedItem=void 0,$scope.searches=function($search){return soundcloudSearch.autoCompleteSearch($search).then(function(response){return response})},$scope.onSelectSearch=function($item){$scope.selectedItem=$item}}]),angular.module("septWebRadioControllers").controller("ReplayCtrl",["$scope",function($scope){$scope.title="Replay"}]),angular.module("septWebRadioControllers").controller("TopicalCtrl",["$scope",function($scope){$scope.title="Topical"}]),angular.module("septWebRadioControllers").controller("DoorCtrl",["$scope",function($scope){$scope.title="Door"}]),angular.module("septWebRadioControllers").controller("BackstageCtrl",["$scope",function($scope){$scope.title="Back Stage"}]);